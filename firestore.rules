rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // La colección "public" puede ser leída por cualquier persona,
    // pero no puede ser escrita por nadie desde el cliente.
    match /public/{document=**} {
      allow read: if true;
      allow write: if false;
    }

    // Un usuario solo puede leer o escribir SUS PROPIOS documentos.
    // Esta regla previene que un usuario acceda a los datos de otro.
    match /users/{userId}/{document=**} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}